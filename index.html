<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strive - Adlerian Goal Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body class="bg-gray-900 min-h-screen font-sans text-gray-100">
    <div class="container mx-auto px-4 py-12 max-w-2xl">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-indigo-400 mb-2">Strive</h1>
            <p class="text-gray-400">"To be human means to feel inferior." - Alfred Adler</p>
        </header>

        <main>
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-8 border border-gray-700">
                <div id="goalContainer">
                    <h2 id="goalText" class="text-2xl font-bold text-indigo-300 cursor-pointer"></h2>
                    <input type="text" id="mainGoal" placeholder="What is your life goal?" 
                        class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg text-white placeholder-gray-400">
                </div>
                <p class="text-sm text-gray-400 mt-2">Your guiding purpose (press Enter to save)</p>
            </div>

            <div class="bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700">
                <h2 class="text-2xl font-semibold text-indigo-300 mb-4">Your Path</h2>
                <p class="text-gray-400 mb-4">"Trust only movement. Life happens at the level of events." - Adler</p>

                <div id="newStepContainer" class="mt-6">
                    <input type="text" id="newStepInput" placeholder="Next step (max 5 uncompleted)" 
                        class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-white placeholder-gray-400">
                </div>
                
                <div id="stepsContainer" class="space-y-3">
                    <!-- Steps will appear here at the top -->
                </div>

            
            </div>
        </main>

        <!-- Quote Modal -->
        <div id="quoteModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 hidden z-50">
            <div class="bg-gray-800 rounded-xl p-6 max-w-sm mx-4 border border-indigo-500 animate__animated animate__fadeInUp">
                <div class="text-center">
                    <h3 class="text-xl font-semibold text-indigo-300 mb-3">Encouragement!</h3>
                    <p id="quoteText" class="text-gray-200 mb-4 italic">Quote will appear here</p>
                    <button id="closeQuoteBtn" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition">
                        Continue
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Adlerian quotes
        const quotes = [
            "The important thing is not what one is born with, but what use one makes of that equipment.",
            "It is easier to fight for one's principles than to live up to them.",
            "Trust only movement. Life happens at the level of events, not of words.",
            "Follow your heart but take your brain with you.",
            "The only normal people are the ones you don't know very well.",
            "To be human means to feel inferior.",
            "Meanings are not determined by situations, but we determine ourselves by the meanings we give to situations.",
            "The greater the feeling of inferiority that has been experienced, the more powerful is the urge to conquest.",
            "Our personal struggles are connected to our social relationships.",
            "The goal of human development is to move from a felt minus to a perceived plus.",
            "Courage is not the absence of fear, but the capacity to act despite our fears.",
            "All problems are interpersonal relationship problems.",
            "The truth is often a terrible weapon of aggression.",
            "We cannot think, feel, will, or act without the perception of some goal.",
            "The style of life is a unity because it has grown out of the difficulties of early life and out of the striving for a goal."
        ];

        let steps = [];
        const maxUncompleted = 5;

        // Initialize goal input
        document.getElementById('goalText').style.display = 'none';

        // Main goal input handler
        document.getElementById('mainGoal').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.trim()) {
                saveGoal(this.value.trim());
            }
        });

        // Double-click to edit goal
        document.getElementById('goalText').addEventListener('dblclick', function() {
            document.getElementById('mainGoal').value = this.textContent;
            document.getElementById('mainGoal').style.display = 'block';
            this.style.display = 'none';
            document.getElementById('mainGoal').focus();
        });

        function saveGoal(text) {
            document.getElementById('goalText').textContent = text;
            document.getElementById('goalText').style.display = 'block';
            document.getElementById('mainGoal').style.display = 'none';
            document.getElementById('mainGoal').value = '';
            showQuote(getRandomQuote());
        }

        // New step input handler
        document.getElementById('newStepInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.trim()) {
                if (getUncompletedCount() >= maxUncompleted) {
                    showQuote("Focus on completing existing steps first! (Max 5 uncompleted)");
                    return;
                }

                addStep(this.value.trim());
                this.value = '';
                showQuote(getRandomQuote());
            }
        });

        function addStep(text) {
            const step = {
                id: Date.now(),
                text: text,
                completed: false
            };
            steps.unshift(step); // Add to beginning of array
            renderSteps();
        }

        function toggleStep(id) {
            const step = steps.find(s => s.id === id);
            if (step) {
                step.completed = !step.completed;
                renderSteps();
                showQuote(getRandomQuote());
            }
        }

        function deleteStep(id) {
            steps = steps.filter(s => s.id !== id);
            renderSteps();
        }

        function getUncompletedCount() {
            return steps.filter(s => !s.completed).length;
        }

        function renderSteps() {
            const container = document.getElementById('stepsContainer');
            container.innerHTML = '';

            steps.forEach(step => {
                const stepEl = document.createElement('div');
                stepEl.className = `flex items-center p-2 bg-gray-700 rounded-lg ${step.completed ? 'opacity-60' : ''}`;
                
                stepEl.innerHTML = `
                    <button class="mr-3 flex-shrink-0" onclick="toggleStep(${step.id})">
                        <div class="h-5 w-5 rounded-full border-2 ${step.completed ? 'bg-indigo-500 border-indigo-500' : 'border-gray-400'} flex items-center justify-center">
                            ${step.completed ? 'âœ“' : ''}
                        </div>
                    </button>
                    <div class="flex-1 ${step.completed ? 'line-through text-gray-400' : 'text-gray-100'}">${step.text}</div>
                    <button class="ml-2 p-1 text-gray-400 hover:text-red-400" onclick="deleteStep(${step.id})">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                    </button>
                `;
                
                container.appendChild(stepEl);
            });

            // Show/hide input based on uncompleted count
            const inputContainer = document.getElementById('newStepContainer');
            if (getUncompletedCount() >= maxUncompleted) {
                inputContainer.style.display = 'none';
            } else {
                inputContainer.style.display = 'block';
                document.getElementById('newStepInput').placeholder = 
                    `Next step (${maxUncompleted - getUncompletedCount()} remaining)`;
            }
        }

        // Show random Adlerian quote
        function showQuote(quote) {
            document.getElementById('quoteText').textContent = quote;
            document.getElementById('quoteModal').classList.remove('hidden');
        }

        function getRandomQuote() {
            return quotes[Math.floor(Math.random() * quotes.length)];
        }

        // Close quote modal
        document.getElementById('closeQuoteBtn').addEventListener('click', function() {
            document.getElementById('quoteModal').classList.add('hidden');
        });

        // Expose functions to global scope for HTML onclick
        window.toggleStep = toggleStep;
        window.deleteStep = deleteStep;
    </script>
</body>
</html>
