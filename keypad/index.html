<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One-Time Pad Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-md p-6">
        <h1 class="text-2xl font-bold text-gray-800 mb-6">One-Time Pad Generator</h1>
        
        <div class="mb-6">
            <label for="message" class="block text-sm font-medium text-gray-700 mb-2">Message to Encrypt/Decrypt</label>
            <textarea id="message" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your message here"></textarea>
        </div>
        
        <div class="mb-6">
            <label for="key" class="block text-sm font-medium text-gray-700 mb-2">Generated One-Time Pad Key</label>
            <textarea id="key" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" readonly></textarea>
            <button id="generateKey" class="mt-2 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                Generate Random Key
            </button>
        </div>
        
        <div class="mb-6">
            <label for="result" class="block text-sm font-medium text-gray-700 mb-2">Result</label>
            <textarea id="result" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" readonly></textarea>
            <div class="mt-2 flex space-x-2">
                <button id="encrypt" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    Encrypt
                </button>
                <button id="decrypt" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Decrypt
                </button>
            </div>
        </div>
        
        <div class="mb-6">
            <h2 class="text-lg font-medium text-gray-800 mb-2">Character to Number Mapping</h2>
            <div id="mapping" class="bg-gray-50 p-4 rounded-md overflow-auto max-h-40">
                <!-- Mapping will be displayed here -->
            </div>
        </div>
    </div>

    <script>
        // Character to number mapping (A-Z, a-z, 0-9, space, and common punctuation)
        const charMap = {};
        let currentCode = 0;
        
        // Add uppercase letters
        for (let i = 65; i <= 90; i++) {
            charMap[String.fromCharCode(i)] = currentCode++;
        }
        
        // Add lowercase letters
        for (let i = 97; i <= 122; i++) {
            charMap[String.fromCharCode(i)] = currentCode++;
        }
        
        // Add numbers
        for (let i = 48; i <= 57; i++) {
            charMap[String.fromCharCode(i)] = currentCode++;
        }
        
        // Add space and common punctuation
        charMap[' '] = currentCode++;
        charMap[','] = currentCode++;
        charMap['.'] = currentCode++;
        charMap['!'] = currentCode++;
        charMap['?'] = currentCode++;
        
        // Display the mapping
        function displayMapping() {
            const mappingContainer = document.getElementById('mapping');
            mappingContainer.innerHTML = '';
            
            const sortedChars = Object.keys(charMap).sort((a, b) => charMap[a] - charMap[b]);
            
            sortedChars.forEach(char => {
                const displayChar = char === ' ' ? 'Space' : char;
                const charElement = document.createElement('div');
                charElement.className = 'inline-block bg-white p-2 m-1 rounded shadow-sm border border-gray-200';
                charElement.textContent = `${displayChar}: ${charMap[char]}`;
                mappingContainer.appendChild(charElement);
            });
        }
        
        // Generate random key
        function generateRandomKey(length) {
            const chars = Object.keys(charMap);
            let key = '';
            
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * chars.length);
                key += chars[randomIndex];
            }
            
            return key;
        }
        
        // One-time pad encryption/decryption
        function processText(encrypt = true) {
            const message = document.getElementById('message').value;
            const key = document.getElementById('key').value;
            
            if (message.length === 0 || key.length === 0) {
                alert('Please enter both message and key');
                return;
            }
            
            if (key.length < message.length) {
                alert('Key must be at least as long as the message');
                return;
            }
            
            let result = '';
            
            for (let i = 0; i < message.length; i++) {
                const messageChar = message[i];
                const keyChar = key[i];
                
                if (!(messageChar in charMap) || !(keyChar in charMap)) {
                    result += '?'; // Character not in mapping
                    continue;
                }
                
                const messageCode = charMap[messageChar];
                const keyCode = charMap[keyChar];
                
                let resultCode;
                if (encrypt) {
                    resultCode = (messageCode + keyCode) % currentCode;
                } else {
                    resultCode = (messageCode - keyCode + currentCode) % currentCode;
                }
                
                // Find character for resultCode
                const resultChar = Object.keys(charMap).find(char => charMap[char] === resultCode);
                result += resultChar || '?';
            }
            
            document.getElementById('result').value = result;
        }
        
        // Event listeners
        document.getElementById('generateKey').addEventListener('click', () => {
            const message = document.getElementById('message').value;
            if (message.length === 0) {
                alert('Please enter a message first');
                return;
            }
            
            const key = generateRandomKey(message.length);
            document.getElementById('key').value = key;
        });
        
        document.getElementById('encrypt').addEventListener('click', () => {
            processText(true);
        });
        
        document.getElementById('decrypt').addEventListener('click', () => {
            processText(false);
        });
        
        // Initialize
        displayMapping();
    </script>
</body>
</html>